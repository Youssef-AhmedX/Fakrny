@page "/Authors"
@using Fakrny.Blazor.Dtos;

<PageTitle>Authors</PageTitle>
<MudBreadcrumbs Items="_items"></MudBreadcrumbs>


<MudCard Elevation="25" Class="mb-5">
    <MudCardHeader Style="padding:20px">
        <CardHeaderAvatar>
            <MudAvatar Rounded="true" Color="Color.Info">
                <MudIcon Icon="@Icons.Material.Filled.Person" />
            </MudAvatar>
        </CardHeaderAvatar>
        <CardHeaderContent>
            <MudText Typo="Typo.h6">Authors</MudText>
        </CardHeaderContent>
        <CardHeaderActions>
            <MudIconButton @onclick="OpenDialog" Style="margin:10px" Variant="Variant.Filled" Icon="@Icons.Material.Filled.Add" Color="Color.Success" />
        </CardHeaderActions>
    </MudCardHeader>
</MudCard>
<MudCard Elevation="25">
    <MudCardContent>
        <MudTable Dense="true" Elevation="0" FixedHeader="true" Height="400px" Loading="@(authors is null)" LoadingProgressColor="Color.Info" Items="authors" Hover="true" SortLabel="Sort By">
            <HeaderContent>
                <MudTh><MudTableSortLabel InitialDirection="SortDirection.Ascending" SortBy="new Func<AuthorDto, object>(x=>x.Name)">Name</MudTableSortLabel></MudTh>
                <MudTh>Status</MudTh>
                <MudTh></MudTh>
            </HeaderContent>
            <RowTemplate>
                <MudTd DataLabel="Name">@context.Name</MudTd>
                <MudTd DataLabel="Status">
                    @if (context.IsDeleted)
                    {
                        <MudChip Size="Size.Small" Icon="@Icons.Material.Filled.Cancel" Color=" Color.Error">Deleted</MudChip>
                    }
                    else
                    {
                        <MudChip Size="Size.Small" Icon="@Icons.Material.Filled.CheckCircle" Color="Color.Success">Avaliable</MudChip>
                    }
                </MudTd>
                <MudTd DataLabel="Actions">
                    <MudButtonGroup Size="Size.Small" Color="Color.Info" Variant="Variant.Outlined">
                        <MudIconButton Icon="@Icons.Material.Filled.Edit"></MudIconButton>
                        <MudToggleIconButton ToggledChanged="() => ChangeStatus(context.Id)"
                                             Icon="@(context.IsDeleted? Icons.Material.Filled.Check : Icons.Material.Outlined.Delete)" Color="@(context.IsDeleted? Color.Success : Color.Error)"
                                             ToggledIcon="@(context.IsDeleted? Icons.Material.Filled.Check : Icons.Material.Outlined.Delete)" ToggledColor="@(context.IsDeleted? Color.Success : Color.Error)" />
                    </MudButtonGroup>
                </MudTd>
            </RowTemplate>
            <PagerContent>
                <MudTablePager HorizontalAlignment="HorizontalAlignment.Center" InfoFormat="{first_item}-{last_item} of {all_items}" PageSizeOptions="new int[]{25, 50, 100,int.MaxValue}" />
            </PagerContent>
        </MudTable>
    </MudCardContent>
</MudCard>


